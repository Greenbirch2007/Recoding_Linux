第６章查看文件(主要是文本文件)

大多数linux计算机的主要优点之一，几乎所有重要的系统配置，日志和信息文件都是文本文件．
这些文本文件几乎都是编码为全面包容的，兼容Unicode的UTF-８格式，该格式取代的了古老的ASCII．

文本文件一开始就是unix的基础，

６．１　　了解文件的类型

file命令对输入其中的文件执行各种测试,以便确定这些文件的类型,然后将其确定的最佳结果输出到stdout.

file *

event.h 是C语言的头文件,
test是HTML文件(即使扩展名缺失也能识别:通常可以不写扩展名,file将指出具体的类型)
test.sh是bash的shell脚本

file命令也以同样的方式识别linux可执行文件,无论它们是已经编译的文件(mtr)还是shell脚本(test.sh).
file命令可以区分这是bash的shell脚本


使用file命令可轻松识别目录和符号链接(以及在使用ls -F时显示的其他"特殊"类型文件)/



6.2  在标准输出设备上查看文件

cat

DOS用户使用type命令将文本文件的内容显示在屏幕上.Linux用户则可以使用执行相同操作的cat命令.


6.3  将文件拼接至标准输出设备

cat file1 file2

6.4  将文件与其他文件拼接

cat file1 file2 > file3  单独设立

cat file1 file2 >> file3 追加


6.5  拼接文件并添加行号

cat -n 文件名

6.6 逐步查看文本文件

less (分页查看)

less是一个分页器的例子,分页器是一次显示文本文件一页内容的程序

less命令在运行时会占据整个屏幕,所以必须使用键盘在less.

less -N 文件名(增加行号)


6.7  在分页器中搜索

用于less的搜索命令

按键搜索              操作
/pattern         向前搜索使用正则表达式表示的模式
n                重复向前搜索
N                重复向后搜索


6.8  在分页查看 文件时进行编辑


less只是查看器,可以通过按v键进行编辑

编辑快捷键设置
export EDITOR=vim

对每个会话只需要运行上述命令,之后每次打开less时,vim就是默认的编辑器


更好的方法是将这么这段代码加入到.bashrc文件中,

6.9  查看文件的前10行内容

head  文件名

6.10  查看多个文件的前10行内容


head file1 file2

可以用head命令一次查看多个文件的前10行.
head命令自动用一个空行和一个标题来分隔两端摘录,


6.11 查看一个或多个文件的前几行内容

head -n 
比如 head -n 6 a.txt (查看a.txt的前6行)


6.12 查看文件前几个字节,几K字节或几M字节的内容

head -c

head -c 10 a.txt (查看a.txt前10个字节的内容)
head -c 10KB a.txt (查看a.txt前10KB个字节的内容)
head -c 10MB a.txt (查看a.txt前10MB个字节的内容)


6.13 查看文件的最后10行内容

tail 文件名

使用场景:通常要查看日志文件的末尾才能发现应用程序或系统的运行状况.

6.14  查看多个文件的最后10行内容

tail file1 file2

6.15  查看一个或多个文件的最后几行内容

tail -n (同head)

6.16   查看一个或多个文件中经常更新的最后几行内容
tail -f

用于查看日志

使用-f选项,tail命令就不会关闭

tail命令会一直打开它,以确保任何新的变化都能即时显示出来,文件的内容不断向上滚动显示,

可通过一个日志文件来测试改为命了

如果文件可能小时或临时不可访问,就可以使用--retry

结合使用-f和--retry选项,就可以是持续监控几乎所有文件,即使该文件可能消失然后重新出现


提示

在生成通过tail监控的文件是,如果知道生成该文件的PID,则可以使用 tail -f--PID#