第8章 管理文件系统

本章内容

文件系统基础
日志文件系统与写时复制文件系统
文件系统管理
逻辑卷布局
使用Linux逻辑卷管理器


使用linux系统时，需要做出一个决策之一就是为存储设备选用什么文件系统


８．１　探索linux文件系统

前面讨论了linux如何通过文件系统来在存储设备上存储文件和目录。
linux文件系统为在硬盘中存储的0和1应用中使用的文件与目录之间搭建起了一座桥梁

linux支持多种类型的文件系统管理文件和目录。每种文件系统都在存储设备上实现了虚拟目录结构，

８．１．１　　基本的linux文件系统

linux最初采用的是一种简单的文件系统，它模仿了Unix文件系统的功能

１．ext文件系统

linux操作系统中引入的最早的文件系统叫做扩展文件系统(extended filesystem,ext)
它为linux提供了一个基本的类Unix文件系统：使用虚拟目录来操作硬件设备，在物理设备上按定长的块来存储数据

ext文件系统采用名为索引节点的胸沟通来存放虚拟目录中所存储文件的信息。索引节点系统
在每个物理设备中创建一个单独的表(称为索引节点表)来存储这些文件的信息
存储在虚拟目录中的每一个文件在索引节点表中都有一个条目
ext文件系统名称中的extended部分来自其跟踪的每个文件的额外数据，包括
１．文件名
２．文件大小
３．文件的属主
４．文件的属组
５．文件的访问权限
６．指向存有文件数据的每个硬盘块的指针

linux通过唯一的数值(称作索引节点号)来引用索引节点表中的每个索引节点，这个值是创建文件时由文件系统分配的。文件系统通过索引节点号而不是文件全名及路径来标示文件

２．ext2文件系统
８．１．２　　日志文件系统


日志文件系统为linux系统增加了层安全性。它不再使用之前先将数据直接下入存储设备再更新索引节点表的做法，而是先将文件的更改写入临时文件(称作日志，journal)中，在数据成功写到存储设备和索引节点表之后，再删除对应的日志条目

如果系统在数据被写入存储设备之前崩溃或断电了，日志文件系统图下次会读取日志文件并处理上次留下的未写入的数据

linux中有３种使用日志的方法，每种的保护等级不同

１．数据模式　　２．有序模式　　　　３．回写模式


其他一些日志文件系统

１.ext3文件系统
２．ext4文件系统
３．Reiser文件系统
４．JFS文件系统
５．ＸFS文件系统

８．１．３　写时复制文件系统


１．ZFS文件系统　　　２．　Btrf文件系统

８．２　操作文件系统

８．２．１　　创建分区

一开始，你必须在存储设备上创建分区来容纳文件系统。分区可以是整个硬盘，也可以是部分硬盘，以容纳虚拟目录的一部分

fdisk工具用来帮助管理安装在系统上的任何存储设备上的分区。它是个交互式程序，允许你输入命令来逐步完成硬盘分区操作

８．２．２　创建文件系统

８．２．３　文件系统的检查与修复

８．３　逻辑卷挂历
